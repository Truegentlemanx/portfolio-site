{% extends 'projects/base.html' %}
{% load static %}

{% block content %}
<div class="container my-5">
  
  <!-- Title -->
  <div class="row mb-4">
    <div class="col text-center">
      <h1 class="display-4 fw-bold">{{ project.title }}</h1>
    </div>
  </div>

  <div class="row justify-content-center align-items-start g-4">

    <!-- Images column (carousel) -->
<div class="col-12 col-md-5">

  {% if project.images.all %}
    <div id="detailImagesCarousel"
         class="carousel slide detail-carousel"
         data-bs-ride="carousel"
         data-bs-interval="4000"
         data-bs-wrap="true">

      <!-- Indicators -->
      <div class="carousel-indicators">
        {% for img in project.images.all %}
          <button type="button"
                  data-bs-target="#detailImagesCarousel"
                  data-bs-slide-to="{{ forloop.counter0 }}"
                  class="{% if forloop.first %}active{% endif %}"
                  {% if forloop.first %}aria-current="true"{% endif %}
                  aria-label="Slide {{ forloop.counter }}">
          </button>
        {% endfor %}
      </div>

      <!-- Slides -->
      <div class="carousel-inner">
        {% for img in project.images.all %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <div class="d-flex justify-content-center py-3">
              <img src="{{ img.image.url }}"
                   class="img-fluid rounded-3 shadow-lg"
                   alt="{{ project.title }}"
                   style="max-height: 520px; object-fit: cover;">
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <p class="text-muted">No images added yet.</p>
  {% endif %}

</div>

    <!-- Description column -->
    <div class="col-12 col-md-5 offset-md-1">
      <p class="lead mb-4 text-justify">{{ project.description }}</p>

      {% if project.technology %}
        <p class="text-muted mb-2">
          <strong>Technologies:</strong><br>
          {{ project.technology }}
        </p>
      {% endif %}
      
      {% if project.repository_link %}
        <a href="{{ project.repository_link }}" 
           class="text-decoration-none mb-2 fs-4 text-success">
          <strong>Go to repository</strong><br></a>
      {% endif %}
    </div>

  </div>
</div>

<style>
    .detail-carousel .carousel-indicators [data-bs-target] {
      background-color: #696b68;
      opacity: 0.55;
    }

    .detail-carousel .carousel-indicators .active {
      opacity: 0.95;
    }
  </style>
{% endblock content %}
